<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>DISH PAY Rechner</title>
    <!-- Meta-Tags für responsives Design -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Verlinkung der CSS-Datei -->
    <link rel="stylesheet" href="styles.css">
    <!-- Einbindung von Font Awesome für Icons -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700&display=swap"
          rel="stylesheet">
    <!-- Tippy.js für Tooltips -->
    <link rel="stylesheet"
          href="https://unpkg.com/tippy.js@6/dist/tippy.css">
    <!-- Shepherd.js für den Assistenten -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/shepherd.js/8.4.1/css/shepherd.css">
</head>
<body>
    <div class="container">
        <h1>DISH PAY Rechner</h1>

        <!-- Kundeninformationen -->
        <div class="customer-input">
            <div class="input-group">
                <label for="salutation">Anrede und Name:<span class="required">*</span></label>
                <div class="name-group">
                    <select id="salutation">
                        <option value="Herr">Herr</option>
                        <option value="Frau">Frau</option>
                    </select>
                    <input type="text" id="customerName" placeholder="Vor- und Nachname" required>
                </div>
                <small class="error-message" id="customerNameError"></small>
            </div>
        </div>

        <!-- Berechnungsart -->
        <label for="calculationType">Berechnungsart:</label>
        <select id="calculationType" onchange="toggleCalculationFields()">
            <option value="schnell">Schnelle Berechnung</option>
            <option value="ausführlich">Ausführliche Berechnung</option>
        </select>

        <!-- Eingabefelder für Berechnung -->
        <div class="input-group">
            <label for="monthlyVolume">Geplanter Kartenumsatz pro Monat (€):<span class="required">*</span>
                <i class="fa fa-info-circle"
                   data-tippy-content="Der erwartete Gesamtumsatz aller Kartenzahlungen pro Monat."></i>
            </label>
            <input type="number" id="monthlyVolume" placeholder="z.B. 20000" required>
            <small class="error-message" id="monthlyVolumeError"></small>
        </div>

        <div class="input-group">
            <label for="transactions">Erwartete Anzahl an monatlichen Transaktionen:<span class="required">*</span>
                <i class="fa fa-info-circle"
                   data-tippy-content="Die geschätzte Anzahl der Kartenzahlungen pro Monat."></i>
            </label>
            <input type="number" id="transactions" placeholder="z.B. 400" required>
            <small class="error-message" id="transactionsError"></small>
        </div>

        <!-- Prozentangaben für Kartentypen -->
        <div class="input-group">
            <label>Kartenarten Anteil (Summe muss 100% ergeben):</label>
            <div class="percentage-group">
                <label for="girocard">Girocard (%):<span class="required">*</span>
                    <i class="fa fa-info-circle"
                       data-tippy-content="Der prozentuale Anteil der Girocard-Zahlungen am Gesamtumsatz."></i>
                </label>
                <input type="number" id="girocard" placeholder="z.B. 70" required>
            </div>
            <div class="percentage-group">
                <label for="mastercardVisa">Mastercard / VISA (%):<span class="required">*</span>
                    <i class="fa fa-info-circle"
                       data-tippy-content="Der prozentuale Anteil der Mastercard/VISA-Zahlungen am Gesamtumsatz."></i>
                </label>
                <input type="number" id="mastercardVisa" placeholder="z.B. 30" required>
            </div>
            <!-- Zusätzliche Felder für ausführliche Berechnung -->
            <div id="vpayField" class="hidden percentage-group">
                <label for="vpay">Maestro / VPAY (%):</label>
                <input type="number" id="vpay" placeholder="z.B. 0">
            </div>
            <div id="businessCardField" class="hidden percentage-group">
                <label for="businessCard">Business Card (%):</label>
                <input type="number" id="businessCard" placeholder="z.B. 0">
            </div>
            <small class="error-message" id="percentageError"></small>
        </div>

        <!-- Wettbewerber -->
        <div id="competitorSection" class="competitor-section hidden">
            <h3>Wettbewerber Gebühren:</h3>
            <div class="input-group">
                <label for="competitorGirocard">Girocard Gebühr (%):</label>
                <input type="number" id="competitorGirocard" placeholder="z.B. 0.9">
            </div>
            <div class="input-group">
                <label for="competitorMaestro">Maestro / VPAY Gebühr (%):</label>
                <input type="number" id="competitorMaestro" placeholder="z.B. 0.9">
            </div>
            <div class="input-group">
                <label for="competitorMastercardVisa">Mastercard / VISA Gebühr (%):</label>
                <input type="number" id="competitorMastercardVisa" placeholder="z.B. 1.9">
            </div>
            <div class="input-group">
                <label for="competitorBusinessCard">Business Card Gebühr (%):</label>
                <input type="number" id="competitorBusinessCard" placeholder="z.B. 3.0">
            </div>
        </div>

        <!-- Kauf oder Miete -->
        <label for="purchaseOption">Kauf oder Miete:</label>
        <select id="purchaseOption" onchange="toggleRentalOptions()">
            <option value="kaufen">Kauf</option>
            <option value="mieten">Miete</option>
        </select>

        <!-- Mietdauer (wird angezeigt, wenn 'Mieten' ausgewählt ist) -->
        <div id="rentalDurationSection" class="hidden">
            <label for="rentalDuration">Mietdauer:</label>
            <select id="rentalDuration">
                <option value="12M">12 Monate</option>
                <option value="36M">36 Monate</option>
                <option value="60M">60 Monate</option>
            </select>
        </div>

        <!-- Hardware -->
        <label for="hardware">Hardware auswählen:</label>
        <select id="hardware">
            <!-- Optionen werden dynamisch durch JavaScript hinzugefügt -->
        </select>

        <!-- Buttons -->
        <button id="calculateButton">Berechnen</button>
        <button id="downloadPdfButton" disabled>PDF Angebot herunterladen</button>
        <button id="sendEmailButton" disabled>Angebot per E-Mail versenden</button>
        <button id="startTourButton">Assistent starten</button>

        <!-- Ergebnisbereich -->
        <div id="resultArea" class="result-section">
            <!-- Bon-Animation -->
            <div id="receiptContainer" class="receipt-container hidden">
                <div id="paper">
                    <div id="receiptContent">
                        <!-- Inhalt des Belegs wird dynamisch über JavaScript eingefügt -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Diagramm-Bereich -->
        <canvas id="costChart" width="400" height="200"></canvas>

        <!-- Gebührenhinweis -->
        <h4>Hinweis zu den Gebühren:</h4>
        <p>Transaktionspreis: 0,06 € pro Transaktion</p>
        <p>Girocard-Gebühr bis 10.000 € monatlich: 0,39%</p>
        <p>Girocard-Gebühr über 10.000 € monatlich: 0,29%</p>
        <p>Disagio Maestro / VPAY: 0,89%</p>
        <p>Disagio Mastercard/VISA Privatkunden: 0,89%</p>
        <p>Disagio Mastercard/VISA Business und NICHT-EWR-RAUM: 2,89%</p>
    </div>

    <!-- Fortschrittsanzeige -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="spinner"></div>
    </div>

    <!-- JavaScript-Dateien einbinden -->
    <!-- Einbindung von jsPDF und jsPDF-AutoTable -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <!-- Tippy.js -->
    <script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.min.js"></script>
    <script src="https://unpkg.com/tippy.js@6/dist/tippy-bundle.umd.min.js"></script>
    <!-- Shepherd.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shepherd.js/8.4.1/js/shepherd.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.8.0/dist/chart.min.js"></script>
    <!-- Eigene Skripte -->
    <script src="script.js"></script>
    <script src="pdf-generator.js"></script>
</body>
</html>
