<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DISH PAY Rechner</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="script.js" defer></script>
    <script>
        function toggleRentalOptions() {
            const rentalOptions = document.getElementById('rentalOptions');
            rentalOptions.style.display = document.getElementById('purchaseOption').value === 'mieten' ? 'block' : 'none';
        }

        function calculateCosts() {
            // Eingabewerte holen
            const monthlyVolume = parseFloat(document.getElementById('monthlyVolume').value) || 0;
            const transactions = parseFloat(document.getElementById('transactions').value) || 0;
            const girocardPercentage = parseFloat(document.getElementById('girocard').value) || 0;
            const maestroPercentage = parseFloat(document.getElementById('maestro').value) || 0;
            const mastercardVisaPercentage = parseFloat(document.getElementById('mastercardVisa').value) || 0;
            const businessCardPercentage = parseFloat(document.getElementById('businessCard').value) || 0;

            // Hardware-Kosten holen
            const hardwareSelect = document.getElementById('hardwareOption');
            const selectedHardware = hardwareSelect.options[hardwareSelect.selectedIndex];
            const purchaseOption = document.getElementById('purchaseOption').value;
            
            const onceCost = parseFloat(selectedHardware.getAttribute('data-once-cost')) || 0;
            let monthlyCost = 0;

            if (purchaseOption === "mieten") {
                const rentalPeriod = document.getElementById('rentalPeriod').value;
                monthlyCost = parseFloat(selectedHardware.getAttribute(`${rentalPeriod}`)) || 0;
            } else {
                monthlyCost = parseFloat(selectedHardware.getAttribute('data-monthly-cost')) || 0;
            }

            // Berechnung der Gebühren pro Transaktion
            const girocardCost = (girocardPercentage / 100) * monthlyVolume * 0.0039;
            const maestroCost = (maestroPercentage / 100) * monthlyVolume * 0.0089;
            const mastercardVisaCost = (mastercardVisaPercentage / 100) * monthlyVolume * 0.0129;
            const businessCardCost = (businessCardPercentage / 100) * monthlyVolume * 0.0289;

            // Gesamtkosten berechnen
            const totalTransactionCost = girocardCost + maestroCost + mastercardVisaCost + businessCardCost;
            const totalMonthlyCost = totalTransactionCost + monthlyCost;
            const totalOnceCost = purchaseOption === "kaufen" ? onceCost : 0;

            // Ergebnisse anzeigen
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <h3>Berechnungsergebnisse:</h3>
                <p>Einmalige Kosten: € ${totalOnceCost.toFixed(2)}</p>
                <p>Monatliche Kosten: € ${totalMonthlyCost.toFixed(2)}</p>
            `;
        }
    </script>
</head>
<body>

<div class="container">
    <h1>DISH PAY Rechner</h1>
    <h3>Monatliche Kostenberechnung</h3>

    <label for="monthlyVolume">Geplanter Kartenumsatz pro Monat (€):</label>
    <input type="number" id="monthlyVolume" placeholder="z.B. 20000" required>

    <label for="transactions">Erwartete Anzahl monatlicher Transaktionen:</label>
    <input type="number" id="transactions" placeholder="z.B. 400" required>

    <label for="girocard">Girocard (%):</label>
    <input type="number" id="girocard" placeholder="z.B. 70" step="0.01" required>

    <label for="maestro">Maestro / VPAY (%):</label>
    <input type="number" id="maestro" placeholder="z.B. 10" step="0.01" required>

    <label for="mastercardVisa">Mastercard / VISA Privatkunden (%):</label>
    <input type="number" id="mastercardVisa" placeholder="z.B. 15" step="0.01" required>

    <label for="businessCard">Mastercard / VISA Business und Nicht-EWR-Raum (%):</label>
    <input type="number" id="businessCard" placeholder="z.B. 5" step="0.01" required>

    <label for="hardwareOption">Hardware-Option:</label>
    <select id="hardwareOption">
        <option value="s1f2" data-once-cost="499" data-monthly-cost="3.9" data-12m-cost="44.90" data-36m-cost="18.90">S1F2 Terminal</option>
        <option value="s12" data-once-cost="399" data-monthly-cost="3.90" data-12m-cost="39.90" data-36m-cost="16.90">S12 Terminal</option>
        <option value="g14" data-once-cost="119" data-monthly-cost="7.90">Moto G14 Terminal</option>
    </select>

    <label for="purchaseOption">Kaufoption:</label>
    <select id="purchaseOption" onchange="toggleRentalOptions()">
        <option value="kaufen">Kaufen</option>
        <option value="mieten">Mieten</option>
    </select>

    <div id="rentalOptions" style="display: none;">
        <label for="rentalPeriod">Mietzeitraum:</label>
        <select id="rentalPeriod">
            <option value="12m-cost">12 Monate</option>
            <option value="36m-cost">36 Monate</option>
        </select>
    </div>

    <button onclick="calculateCosts()">Berechnen</button>

    <div id="results"></div>
</div>

</body>
</html>
